<!DOCTYPE form-validation PUBLIC
"-//Apache Software Foundation//DTD Commons Validator Rules Configuration 1.1.3//EN"
"http://jakarta.apache.org/commons/dtds/validator_1_1_3.dtd">

<form-validation>
	<formset>
		<form name="/preCreateSample">
			<field property="numberOfContainers" depends="integer">
				<arg position="0" key="createSampleForm.numberOfContainers" bundle="administration" />
			</field>
		</form>

		<form name="/createSample">
			<field property="sampleId" depends="required">
				<arg position="0" key="createSampleForm.sampleId" bundle="administration" />
			</field>
			<field property="lotId" depends="required">
				<arg position="0" key="createSampleForm.lotId" bundle="administration" />
			</field>
			<field property="numberOfContainers" depends="required,integer">
				<arg position="0" key="createSampleForm.numberOfContainers" bundle="administration" />
			</field>
			<field property="dateReceived" depends="date">
				<arg position="0" key="createSampleForm.dateReceived" bundle="administration" />
				<var>
					<var-name>datePattern</var-name>
					<var-value>MM/dd/yyyy</var-value>
				</var>
			</field>
			<field property="otherContainerType" depends="validwhen" indexedListProperty="containers">
				<arg position="0" key="createSampleForm.otherContainerType" bundle="administration" />
				<var>
					<var-name>test</var-name>
					<var-value>((containers[].containerType!="Other") or (*this*!=null))</var-value>
				</var>
			</field>
			<field property="quantity" depends="float" indexedListProperty="containers">
				<arg position="0" key="createSampleForm.quantity" bundle="administration" />
			</field>
			<field property="concentration" depends="float" indexedListProperty="containers">
				<arg position="0" key="createSampleForm.concentration" bundle="administration" />
			</field>
			<field property="volume" depends="float" indexedListProperty="containers">
				<arg position="0" key="createSampleForm.volume" bundle="administration" />
			</field>
		</form>

		<form name="/preCreateAliquot">
			<field property="sampleId" depends="validwhen">
				<arg position="0" key="createAliquotForm.sampleId" bundle="administration" />
				<var>
				<var-name>test</var-name>
				<var-value>((numberOfAliquots==0) or (*this*!=null))</var-value>
				</var>
			</field>
			<field property="lotId" depends="required">
				<arg position="0" key="createAliquotForm.lotId" bundle="administration" />
			</field>
			<field property="numberOfAliquots" depends="integer">
				<arg position="0" key="createAliquotForm.numberOfAliquots" bundle="administration" />
			</field>
			<field property="template.container.otherContainerType" depends="validwhen">
				<arg position="0" key="createAliquotForm.otherContainerType" bundle="administration" />
				<var>
					<var-name>test</var-name>
					<var-value>((template.container.containerType!="Other") or (*this*!=null))</var-value>
				</var>
			</field>
			<field property="template.container.quantity" depends="float">
				<arg position="0" key="createAliquotForm.quantity" bundle="administration" />
			</field>
			<field property="template.container.concentration" depends="float">
				<arg position="0" key="createAliquotForm.concentration" bundle="administration" />
			</field>
			<field property="template.container.volume" depends="float">
				<arg position="0" key="createAliquotForm.volume" bundle="administration" />
			</field>
		</form>
		<form name="/createAliquot">
			<field property="sampleId" depends="required">
				<arg position="0" key="createAliquotForm.sampleId" bundle="administration" />
			</field>
			<field property="lotId" depends="required">
				<arg position="0" key="createAliquotForm.lotId" bundle="administration" />
			</field>
			<field property="numberOfAliquots" depends="required,integer">
				<arg position="0" key="createAliquotForm.numberOfAliquots" bundle="administration" />
			</field>
			<field property="template.container.otherContainerType" depends="validwhen">
				<arg position="0" key="createAliquotForm.otherContainerType" bundle="administration" />
				<var>
					<var-name>test</var-name>
					<var-value>((template.container.containerType!="Other") or (*this*!=null))</var-value>
				</var>
			</field>
			<field property="template.container.quantity" depends="float">
				<arg position="0" key="createAliquotForm.quantity" bundle="administration" />
			</field>
			<field property="template.container.concentration" depends="float">
				<arg position="0" key="createAliquotForm.concentration" bundle="administration" />
			</field>
			<field property="template.container.volume" depends="float">
				<arg position="0" key="createAliquotForm.volume" bundle="administration" />
			</field>
		</form>
	</formset>
</form-validation>
