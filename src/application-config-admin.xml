<?xml version="1.0" encoding="UTF-8"?>

<!--L
   Copyright SAIC
   Copyright SAIC-Frederick

   Distributed under the OSI-approved BSD 3-Clause License.
   See http://ncip.github.com/cananolab/LICENSE.txt for details.
L-->

<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans default-lazy-init="false" default-dependency-check="none"
	default-autowire="no">

	<!-- Bean Definitions for Admin Services -->
    <bean id="AdminDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName">
            <value>java:/caNanoLab</value>
        </property>
    </bean>
	
    <bean id="AdminTransactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
		<property name="dataSource">
			<ref bean="AdminDataSource" />
		</property>
    </bean>
	
    <bean id="AdminTxInterceptor" class="org.springframework.transaction.interceptor.TransactionInterceptor">
		<property name="transactionManager">
			<ref bean="AdminTransactionManager" />
		</property>
        <property name="transactionAttributes">
            <props>
                <prop key="*">PROPAGATION_REQUIRED</prop>
            </props>
        </property>
    </bean>
    
	<bean name="AdminServiceJDBCImpl"
		class="gov.nih.nci.cananolab.service.admin.impl.AdminServiceJDBCImpl">
		<property name="dataSource">
			<ref bean="AdminDataSource" />
		</property>
	</bean>
	 
    <bean id="adminServiceDAO" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <ref bean="AdminServiceJDBCImpl"/>
        </property>
        <property name="interceptorNames">
            <list>
                <value>AdminTxInterceptor</value>
            </list>
        </property>
    </bean>
    
	<bean name="/admin"
		class="gov.nih.nci.cananolab.ui.admin.AdministrationAction">
		<property name="adminService">
			<ref bean="adminServiceDAO" />
		</property>
	</bean>
</beans>